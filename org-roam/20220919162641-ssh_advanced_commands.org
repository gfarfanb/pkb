:PROPERTIES:
:ID:       3a543bc9-c3c0-415f-af5d-e50019ec23b6
:END:
#+title: SSH advanced commands

|   # | Command                                                                                           | Description                                                                                                                                                                                                  |
|-----+---------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  1. | ~ssh-copy-id~                                                                                     | Install your public key in a remote machine's authorized_keys                                                                                                                                                |
|  2. | ~ssh -t <user>@<host> <command>~                                                                  | Avoid requesting terminal (interactive mode) to execute the appended command                                                                                                                                 |
|  3. | ~ssh -D <port> <user>@<host>~                                                                     | Allocates a socket to listen to port o the local side                                                                                                                                                        |
|  4. | ~ssh -X <user>@<host>~                                                                            | Enable [[id:a1436d9e-036f-4e3b-aa73-47da690a3ad9][X11]] forwarding                                                                                                                                                                                        |
|  5. | ~ssh -L <local-port>:<private-ip>:<private-port> <user>@<public-host>~                            | Stablish a connection to a private server through a reachable (public) server                                                                                                                                |
|  6. | ~ssh -p <local-port> <user>@localhost~                                                            | Once connection is stablished (command *5.*) connect to a private server                                                                                                                                     |
|  7. | ~ssh -R <external-port>:localhost:<local-port> <user>@<external-ip>~                              | (Reverse SSH Tunneling) Stabish a connection to a external server from a private server (you could need a temporal user for external server since the connection must be stablished from the private server) |
|  8. | ~ssh <config-host>~                                                                               | Fast connection to a server by using an SSH config entry from [[file:~/workspace/pkb/config/ssh-config-debian][./ssh/config]]                                                                                                                                   |
|  9. | ~ssh <config-host> <command>~                                                                     | Fast SSH command execution                                                                                                                                                                                   |
| 10. | ~scp <file-location> <user>@<host>:<remote-location>~                                             | Copy file to a remote server                                                                                                                                                                                 |
| 11. | ~scp <file-localtion> <config-host>:<remote-location>~                                            | Copy file to a remote server using SSH config entry                                                                                                                                                          |
| 12. | ~rsync --partial --progress --rsh=ssh <file-location> <config-host>:<remote-location>~            | Copy file to a remote server using [[id:486862d1-36b4-45e3-ab97-8ec6b5843256][Rsync]]                                                                                                                                                                     |
| 13. | ~ssh -t <config-host-1> ssh <user>@<host-2>~                                                      | Connect to a server 2 (we have to specify host since server 1 probably doesn't have the respective SSH config entry) using server 1, once public key is [[id:82e0c5fc-c11e-48bb-8e8a-36c9b4cfd2ab][added to SSH Agent]]                                   |
| 14. | ~ssh -J <config-host-1> <config-host-2>~ ~ssh -J <config-host-1>,<config-host-2> <config-host-3>~ | Same as *13.* but using aliases for both servers (both are entries in SSH config)                                                                                                                            |
| 15. | ~w~                                                                                               | See the current SSH connections                                                                                                                                                                              |
| 16. | ~\~c~ /<RET>/ ~-L 8080:localhost:80~                                                              | Forward port during SSH connection                                                                                                                                                                           |
| 17. | ~sshf <user>@<external-ip>:<mount-location> <mount-destination>~                                  | Mount a directory to a remote server through SSH                                                                                                                                                             |
| 18. | ~vim scp://<config-host>/<file-home>~ ~vim scp://<config-host>//home/user.../file~                | Edit file using VIM using SSH                                                                                                                                                                                |

